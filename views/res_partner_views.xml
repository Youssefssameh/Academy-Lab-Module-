<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_res_partner_form_inherit_academy_lab" model="ir.ui.view">
        <field name="name">res.partner.form.inherit.academy.lab</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">

            <xpath expr="//div[hasclass('oe_button_box')]" position="inside">

                <button type="action"
                        name="%(academy_lab.action_academy_enrollment_all)d"
                        class="oe_stat_button"
                        icon="fa-graduation-cap">
                    <field name="total_courses_enrolled" widget="statinfo" string="Enrolled"/>
                </button>

                <button type="action"
                        name="%(academy_lab.action_academy_courses)d"
                        class="oe_stat_button"
                        icon="fa-book">
                    <field name="total_courses_teaching" widget="statinfo" string="Teaching"/>
                </button>

            </xpath>

            <xpath expr="//notebook" position="inside">
                <page string="Academy">
                    <group>
                        <field name="is_student"/>
                        <field name="is_instructor"/>
                    </group>
                    
                    <div class="oe_button_box" name="button_box">
                        <button name="%(academy_lab.report_student_transcript)d"
                                type="action"
                                string="Print Transcript"
                                class="oe_stat_button"
                                icon="fa-file-text-o"
                                invisible="not is_student"/>
                    </div>

                    <group string="Totals">
                        <field name="total_courses_enrolled" readonly="1"/>
                        <field name="total_courses_teaching" readonly="1"/>
                    </group>

                    <notebook>
                        <page string="Enrollments">
                            <field name="student_enrollment_ids" readonly="1">
                                <list>
                                    <field name="course_id"/>
                                    <field name="enrollment_date"/>
                                    <field name="state"/>
                                    <field name="grade"/>
                                    <field name="attendance_percentage"/>
                                    <field name="passed"/>
                                </list>
                            </field>
                        </page>

                        <page string="Courses Teaching">
                            <field name="instructor_course_ids" readonly="1">
                                <list>
                                    <field name="name"/>
                                    <field name="code"/>
                                    <field name="state"/>
                                    <field name="start_date"/>
                                    <field name="end_date"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </page>
            </xpath>

        </field>
    </record>

</odoo>
