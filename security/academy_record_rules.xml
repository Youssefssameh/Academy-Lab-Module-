<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="rule_course_student_published_only" model="ir.rule">
        <field name="name">academy.course: student: published only</field>
        <field name="model_id" ref="model_academy_course"/>
        <field name="domain_force">[('state', '=', 'published')]</field>
        <field name="groups" eval="[(4, ref('academy_lab.academy_group_student'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>


    <record id="rule_enrollment_student_own_only" model="ir.rule">
        <field name="name">academy.enrollment: student: own only</field>
        <field name="model_id" ref="model_academy_enrollment"/>
        <field name="domain_force">[('student_id', '=', user.partner_id.id)]</field>
        <field name="groups" eval="[(4, ref('academy_lab.academy_group_student'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Instructors: enrollments (read only)-->
    <record id="rule_enrollment_instructor_read/write" model="ir.rule">
        <field name="name">academy.enrollment: instructor: own courses only (read/write)</field>
        <field name="model_id" ref="model_academy_enrollment"/>
        <field name="domain_force">[('course_id.instructor_id', '=', user.partner_id.id)]</field>
        <field name="groups" eval="[(4, ref('academy_lab.academy_group_instructor'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <record id="rule_course_instructor_manager_all" model="ir.rule">
        <field name="name">academy.course: instructor/manager: all</field>
        <field name="model_id" ref="model_academy_course"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('academy_lab.academy_group_instructor')), (4, ref('academy_lab.academy_group_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>


    <record id="rule_enrollment_manager_all" model="ir.rule">
        <field name="name">academy.enrollment: manager: all</field>
        <field name="model_id" ref="model_academy_enrollment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('academy_lab.academy_group_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>

</odoo>
